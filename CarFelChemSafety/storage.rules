rules_version = '2';

// ============================================================
// STORAGE RULES - DEBUG MODE
// Projeto: CarFel ChemSafety (carfel-chemsafety)
// ============================================================
//
// ⚠️  ATENÇÃO: Estas regras são para DESENVOLVIMENTO/DEBUG.
//     NÃO usar em produção sem restringir os acessos.
// ============================================================

service firebase.storage {
  match /b/{bucket}/o {

    // DEBUG: Permite leitura e escrita para qualquer
    // utilizador autenticado, em qualquer path.
    match /{allPaths=**} {
      allow read, write: if request.auth != null;
    }

    // -------------------------------------------------------
    // REGRAS DE PRODUÇÃO (descomentar quando estiver pronto)
    // -------------------------------------------------------
    //
    // // Fotos de perfil dos utilizadores
    // match /users/{userId}/profile/{fileName} {
    //   allow read: if request.auth != null;
    //   allow write: if request.auth != null
    //                && request.auth.uid == userId
    //                && request.resource.size < 5 * 1024 * 1024  // máx 5MB
    //                && request.resource.contentType.matches('image/.*');
    // }
    //
    // // Documentos/fichas de segurança química
    // match /documents/{docId} {
    //   allow read: if request.auth != null;
    //   allow write: if request.auth != null
    //                && request.resource.size < 10 * 1024 * 1024; // máx 10MB
    // }
  }
}
